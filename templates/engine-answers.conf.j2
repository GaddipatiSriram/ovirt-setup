# oVirt Engine Setup Answer File
# Reference: https://www.ovirt.org/documentation/installing_ovirt_as_a_standalone_manager_with_local_databases/
# Managed by Ansible

[environment:default]
OVESETUP_DIALOG/confirmSettings=bool:True
OVESETUP_CONFIG/applicationMode=str:both
OVESETUP_CONFIG/remoteEngineSetupStyle=none:None
OVESETUP_CONFIG/adminPassword=str:{{ ovirt_engine_admin_password }}
OVESETUP_CONFIG/storageIsLocal=bool:False
OVESETUP_CONFIG/firewallManager=str:firewalld
OVESETUP_CONFIG/updateFirewall=bool:True
OVESETUP_CONFIG/fqdn=str:{{ ovirt_engine_fqdn }}
OVESETUP_CONFIG/sanWipeAfterDelete=bool:False

# PostgreSQL provisioning - let engine-setup handle it
OVESETUP_PROVISIONING/postgresProvisioningEnabled=bool:True

# Engine Database - Local automatic setup
OVESETUP_DB/secured=bool:False
OVESETUP_DB/securedHostValidation=bool:False
OVESETUP_DB/host=str:{{ ovirt_engine_db_host }}
OVESETUP_DB/port=int:{{ ovirt_engine_db_port }}
OVESETUP_DB/database=str:{{ ovirt_engine_db_name }}
OVESETUP_DB/user=str:{{ ovirt_engine_db_user }}
OVESETUP_DB/password=str:{{ ovirt_engine_db_password }}
OVESETUP_DB/dumper=str:pg_custom
OVESETUP_DB/filter=none:None
OVESETUP_DB/restoreJobs=int:2

# Data Warehouse - Enable with local database
OVESETUP_DWH_CORE/enable=bool:True

OVESETUP_DWH_DB/secured=bool:False
OVESETUP_DWH_DB/securedHostValidation=bool:False
OVESETUP_DWH_DB/host=str:{{ ovirt_engine_dwh_db_host }}
OVESETUP_DWH_DB/port=int:{{ ovirt_engine_db_port }}
OVESETUP_DWH_DB/database=str:{{ ovirt_engine_dwh_db_name }}
OVESETUP_DWH_DB/user=str:{{ ovirt_engine_dwh_db_user }}
OVESETUP_DWH_DB/password=str:{{ ovirt_engine_dwh_db_password }}
OVESETUP_DWH_DB/dumper=str:pg_custom
OVESETUP_DWH_DB/filter=none:None
OVESETUP_DWH_DB/restoreJobs=int:2
OVESETUP_DWH_PROVISIONING/postgresProvisioningEnabled=bool:True

# DWH sampling scale - 1=Basic, 2=Full
OVESETUP_DWH_CONFIG/scale=str:1

# Engine core
OVESETUP_ENGINE_CORE/enable=bool:True
OVESETUP_CORE/engineStop=none:None

# System configuration
OVESETUP_SYSTEM/memCheckEnabled=bool:False
OVESETUP_SYSTEM/nfsConfigEnabled=bool:False

# PKI/Certificate settings
OVESETUP_PKI/organization=str:{{ ovirt_engine_organization }}
OVESETUP_PKI/renew=none:None

# Apache configuration
OVESETUP_APACHE/configureRootRedirection=bool:True
OVESETUP_APACHE/configureSsl=bool:True

# ImageIO proxy
OVESETUP_CONFIG/imageioProxyConfig=bool:True

# WebSocket proxy for noVNC console
OVESETUP_CONFIG/websocketProxyConfig=bool:True

# VM Console proxy
OVESETUP_VMCONSOLE_PROXY_CONFIG/vmconsoleProxyConfig=bool:True

# Grafana integration (if available)
OVESETUP_GRAFANA_CORE/enable=bool:True
OVESETUP_GRAFANA_CONFIG/grafanaAdminPassword=str:{{ ovirt_engine_admin_password }}

# Cinderlib integration - disabled for standalone
OVESETUP_CINDERLIB_CONFIG/cinderLibConfigEnabled=bool:False

# OVN - disable for basic standalone setup
OVESETUP_OVN/ovirtProviderOvn=bool:False

# Keycloak configuration (oVirt 4.5+)
OVESETUP_CONFIG/keycloakEnable=bool:True
OVESETUP_KEYCLOAK_DB/host=str:localhost
OVESETUP_KEYCLOAK_DB/port=int:5432
OVESETUP_KEYCLOAK_DB/database=str:ovirt_engine_keycloak
OVESETUP_KEYCLOAK_DB/user=str:ovirt_engine_keycloak
OVESETUP_KEYCLOAK_DB/password=str:{{ ovirt_engine_db_password }}
OVESETUP_KEYCLOAK_DB/secured=bool:False
OVESETUP_KEYCLOAK_DB/securedHostValidation=bool:False
OVESETUP_KEYCLOAK_PROVISIONING/postgresProvisioningEnabled=bool:True
